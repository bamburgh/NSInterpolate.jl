<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · NSInterpolate.jl</title><meta name="title" content="Home · NSInterpolate.jl"/><meta property="og:title" content="Home · NSInterpolate.jl"/><meta property="twitter:title" content="Home · NSInterpolate.jl"/><meta name="description" content="Documentation for NSInterpolate.jl."/><meta property="og:description" content="Documentation for NSInterpolate.jl."/><meta property="twitter:description" content="Documentation for NSInterpolate.jl."/><meta property="og:url" content="https://bamburgh.github.io/NSInterpolate.jl/"/><meta property="twitter:url" content="https://bamburgh.github.io/NSInterpolate.jl/"/><link rel="canonical" href="https://bamburgh.github.io/NSInterpolate.jl/"/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>NSInterpolate.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/bamburgh/NSInterpolate.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/bamburgh/NSInterpolate.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="NSInterpolate"><a class="docs-heading-anchor" href="#NSInterpolate">NSInterpolate</a><a id="NSInterpolate-1"></a><a class="docs-heading-anchor-permalink" href="#NSInterpolate" title="Permalink"></a></h1><p>Documentation for <a href="https://github.com/bamburgh/NSInterpolate.jl">NSInterpolate</a>.</p><ul><li><a href="#NSInterpolate.NSInterpolate"><code>NSInterpolate.NSInterpolate</code></a></li><li><a href="#NSInterpolate.NSinterp-Tuple{String}"><code>NSInterpolate.NSinterp</code></a></li><li><a href="#NSInterpolate.initial_average-Tuple{Any, Any}"><code>NSInterpolate.initial_average</code></a></li><li><a href="#NSInterpolate.initial_interpolation-NTuple{5, Any}"><code>NSInterpolate.initial_interpolation</code></a></li><li><a href="#NSInterpolate.obs_from_geoxyz-Tuple{Any}"><code>NSInterpolate.obs_from_geoxyz</code></a></li><li><a href="#NSInterpolate.xyz_channels-Tuple{String, Integer, Integer}"><code>NSInterpolate.xyz_channels</code></a></li><li><a href="#NSInterpolate.xyz_count"><code>NSInterpolate.xyz_count</code></a></li><li><a href="#NSInterpolate.xyz_lines-Tuple{String, Any}"><code>NSInterpolate.xyz_lines</code></a></li></ul><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NSInterpolate.NSInterpolate" href="#NSInterpolate.NSInterpolate"><code>NSInterpolate.NSInterpolate</code></a> — <span class="docstring-category">Module</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>The code is a conversion from <code>c#</code> of that published by T. Naprstek and R. S. Smith (2019,  A new method for interpolating linear features in aeromagnetic data. Geophysics, 84(3),  JM15-JM24). I have used version NSI_v8 from github:     https://github.com/TomasNaprstek/Naprstek-Smith-Interpolation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bamburgh/NSInterpolate.jl/blob/99c340f9bb2c7feb4753f409ee811da0be9940f1/src/NSInterpolate.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NSInterpolate.NSinterp-Tuple{String}" href="#NSInterpolate.NSinterp-Tuple{String}"><code>NSInterpolate.NSinterp</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">NSinterp(param_file)</code></pre><p>Read parameters from <code>param_file</code> into a dictionary, <code>paramd</code>, and call <code>NSinterp(paramd)</code></p><p>A more detailed explanation can go here, perhaps a ref to the paper.</p><p><strong>Arguments</strong></p><ul><li><code>param_file</code>: The name of the JSON file containing the input parameters.</li></ul><p><strong>Notes</strong></p><p>The parameter file contains values for the following input parameters:</p><pre><code class="nohighlight hljs">input_xyz_file: Geosoft XYZ file containing the observed data
input_xyz_east: the name of the channel in `input_xyz_file` containing the eastings
input_xyz_north: the name of the channel in `input_xyz_file` containing the northings
input_xyz_value: the name of the channel in `input_xyz_file` containing the values to grid
datum: the geographic datum (e.g. WGS84) for the input data
projection: the geographic projection for the input data (e.g. &quot;NUTM17&quot;)
outputFile: the name of the netCDF4 file that the grid will be written to
cellSize: edge size of each square cell in metres
interpDist: metres away that will be interpolated
maxLoop: the number of times the interpolation loop will be processed
searchStepSize: how much of a cell we will &quot;travel&quot; each search step
cellSizeF: resampled final cell size
trendM: 100 - median % location (so 0 is no trending, 100 is full trending)
autoStop: a checkbox of whether or not to auto stop
angleSearch: the number of degrees it will move each time when searching away from the initial eigenvector
multiSmooth: smooth the multiplier grid before applying the normalization process (0 is no smoothing, 100 is max smoothing) (%)
spatialSmooth: a checkbox of whether or not to use spatial smoothing (in almost all cases, should be used)
outputwritebool: if 0, outputs in x y value. if 1, outputs in a format easy for importing into Oasis Montaj.
realGridLocations: if 0, outputs real data in the equi-distance grid cell locations. If 1, then output the real data cells as an average position of all real data within the cell.</code></pre><p><strong>Examples</strong></p><pre><code class="language-julia hljs">julia&gt;  NSinterp(&quot;tokens.json&quot;)

NSinterp
  Julia version by Mark Dransfield after Naprstek and Smith
  Version gamma!
  Tue, 28 Jan 2025 10:37:51
  6 threads.
  Julia Version - 1.8.2

Accessing XYZ data in 2205173_Blackall_AGG_Preliminary.xyz.

  Found 141 header records
  Found 230 lines
  Found 43 channels

  Starting anisotropic gridding loop, loop counter:  1 2 3 4 5 6 7 8 9 10

End</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bamburgh/NSInterpolate.jl/blob/99c340f9bb2c7feb4753f409ee811da0be9940f1/src/NSInterpolate.jl#L75-L129">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NSInterpolate.initial_average-Tuple{Any, Any}" href="#NSInterpolate.initial_average-Tuple{Any, Any}"><code>NSInterpolate.initial_average</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Check through all grid cells, and if a cell has more than one reading in it: average the value over the number of readings. Also average the relative positions and restore the offset, so that the mean value is at the mean position and not at the centre, or a corner of, the cell. The flag for the cell is then set to 1.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bamburgh/NSInterpolate.jl/blob/99c340f9bb2c7feb4753f409ee811da0be9940f1/src/initial_average.jl#L1-L6">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NSInterpolate.initial_interpolation-NTuple{5, Any}" href="#NSInterpolate.initial_interpolation-NTuple{5, Any}"><code>NSInterpolate.initial_interpolation</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><p>Now go through all cells, and assign values to the ones that have no data currently, or determine if they are too far away from real data to use. During this process we will also find all closest data to each cell which will be information needed when normalizing.</p><p>The meaning of the cell flag is changed and now becomes: +1: a cell that has observations within its borders;  0: a cell without observations within its borders and whose value has been interpolated; -1: a cell too far from data to be interpolated and which will remain un-filled.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bamburgh/NSInterpolate.jl/blob/99c340f9bb2c7feb4753f409ee811da0be9940f1/src/initial_interpolation.jl#L1-L11">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NSInterpolate.obs_from_geoxyz-Tuple{Any}" href="#NSInterpolate.obs_from_geoxyz-Tuple{Any}"><code>NSInterpolate.obs_from_geoxyz</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">obs_from_geoxyz(xyz_file)

Read a set of XYZ observation locations from a Geosoft XYZ file.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bamburgh/NSInterpolate.jl/blob/99c340f9bb2c7feb4753f409ee811da0be9940f1/src/xyzreader.jl#L1-L5">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NSInterpolate.xyz_channels-Tuple{String, Integer, Integer}" href="#NSInterpolate.xyz_channels-Tuple{String, Integer, Integer}"><code>NSInterpolate.xyz_channels</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">xyz_channels(file_name::String, num_head_recs::Integer, num_channels::Integer)</code></pre><p>Get the names of the channels in a Geosoft XYZ <code>file_name</code>. The algorithm checks  <code>num_head_recs</code> header records. If it finds one with a number of words equal to  the number of channels, <code>num_channels</code>, then it returns those words as an array  of channel names.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bamburgh/NSInterpolate.jl/blob/99c340f9bb2c7feb4753f409ee811da0be9940f1/src/xyzreader.jl#L212-L219">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NSInterpolate.xyz_count" href="#NSInterpolate.xyz_count"><code>NSInterpolate.xyz_count</code></a> — <span class="docstring-category">Function</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">xyz_count(file_name::String)

Count the number of header records, flight lines and channels in XYZ file.

Also the decimal precision of each channel in the Geosoft XYZ file.

params
----------
file_name ::String
    The name of the Geosoft XYZ file.

Returns
-------
num_head_recs ::Int
    The .
num_lines ::Int
    The .
num_channels ::Int
    The .
field_precisions ::Int
    The .</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bamburgh/NSInterpolate.jl/blob/99c340f9bb2c7feb4753f409ee811da0be9940f1/src/xyzreader.jl#L90-L112">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="NSInterpolate.xyz_lines-Tuple{String, Any}" href="#NSInterpolate.xyz_lines-Tuple{String, Any}"><code>NSInterpolate.xyz_lines</code></a> — <span class="docstring-category">Method</span><span class="is-flex-grow-1 docstring-article-toggle-button" title="Collapse docstring"></span></header><section><div><pre><code class="language-julia hljs">xyz_lines(file_name::String, num_lines)

Returns the line numbers (`line_ids`), and the number of fiducials in each line.
A helper funtion for `xyz_to_whizz`.

params
----------
whizz_file ::String
    The name of the geoWhizz file.

Returns
-------
None</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/bamburgh/NSInterpolate.jl/blob/99c340f9bb2c7feb4753f409ee811da0be9940f1/src/xyzreader.jl#L159-L173">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Thursday 30 January 2025 02:24">Thursday 30 January 2025</span>. Using Julia version 1.11.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
